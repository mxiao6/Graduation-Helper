language: node_js
node_js:
 - "stable"
 
sudo: required
 
before_script:
  - npm install -g mocha
  - npm install -g selenium-webdriver
  - cd client
  - npm install
  - cd ..
  
deploy:
  provider: azure_web_apps
  username: gh428
  password: GH428429
  site: grhfree.scm.azurewebsites.net

addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

script:
  - node server.js &
  - sleep 10
  - cd client
  - npm start &
  - sleep 30
  - cd ..
  - mocha test/selenium
  - mocha --exit test/backend
  - semistandard "routes/**/*.js" "*.js"
  - semistandard --env mocha "test/**/*.js"